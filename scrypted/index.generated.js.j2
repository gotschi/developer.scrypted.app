class ScryptedDeviceBase {
    constructor(nativeId) {
        this._nativeId = nativeId;
    }

    get storage() {
        if (!this._storage) {
            this._storage = deviceManager.getDeviceStorage(this._nativeId);
        }
        return this._storage;
    }

    get log() {
        if (!this._log) {
            this._log = deviceManager.getDeviceLogger(this._nativeId);
        }
        return this._log;
    }

    _lazyLoadDeviceState() {
        if (!this._deviceState) {
            if (this._nativeId) {
                this._deviceState = deviceManager.getDeviceState(this._nativeId);
            }
            else {
                this._deviceState = deviceManager.getDeviceState();
            }
        }
    }
{% for field in state.fields %}
    get {{ field.name }}() {
        this._lazyLoadDeviceState();
        return this._deviceState.{{ field.name }};
    }
    set {{ field.name }}(value) {
        this._lazyLoadDeviceState();
        this._deviceState.{{ field.name }} = value;
    }
{% endfor %}
}

const sdk = {
    ScryptedDeviceBase,
}

module.exports = sdk;
module.exports.default = sdk;

{%- for name, c in classes -%}
{%- if c.values.length %}
module.exports.{{ name }} = {
{%- for value in c.values %}
  {{ value }}: "{{ value }}",
{%- endfor %}
}
{%- endif %}
{%- endfor %}
