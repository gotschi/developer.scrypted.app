
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Scrypted API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;typescript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
      <center><div style="color: white;">Scrypted Documentation</div></center>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="typescript">typescript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started ">Getting Started <br></a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#controlling-a-device" class="toc-h2 toc-link" data-title="Controlling a Device">Controlling a Device</a>
                  </li>
                  <li>
                    <a href="#creating-a-device" class="toc-h2 toc-link" data-title="Creating a Device">Creating a Device</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reference" class="toc-h1 toc-link" data-title="Reference">Reference</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#onoff" class="toc-h2 toc-link" data-title="OnOff">OnOff</a>
                  </li>
                  <li>
                    <a href="#brightness" class="toc-h2 toc-link" data-title="Brightness">Brightness</a>
                  </li>
                  <li>
                    <a href="#colorsettingtemperature" class="toc-h2 toc-link" data-title="ColorSettingTemperature">ColorSettingTemperature</a>
                  </li>
                  <li>
                    <a href="#colorsettingrgb" class="toc-h2 toc-link" data-title="ColorSettingRgb">ColorSettingRgb</a>
                  </li>
                  <li>
                    <a href="#colorrgb" class="toc-h2 toc-link" data-title="ColorRgb">ColorRgb</a>
                  </li>
                  <li>
                    <a href="#colorsettinghsv" class="toc-h2 toc-link" data-title="ColorSettingHsv">ColorSettingHsv</a>
                  </li>
                  <li>
                    <a href="#colorhsv" class="toc-h2 toc-link" data-title="ColorHsv">ColorHsv</a>
                  </li>
                  <li>
                    <a href="#binarysensor" class="toc-h2 toc-link" data-title="BinarySensor">BinarySensor</a>
                  </li>
                  <li>
                    <a href="#entrysensor" class="toc-h2 toc-link" data-title="EntrySensor">EntrySensor</a>
                  </li>
                  <li>
                    <a href="#entryhandlesensor" class="toc-h2 toc-link" data-title="EntryHandleSensor">EntryHandleSensor</a>
                  </li>
                  <li>
                    <a href="#intrusionsensor" class="toc-h2 toc-link" data-title="IntrusionSensor">IntrusionSensor</a>
                  </li>
                  <li>
                    <a href="#floodsensor" class="toc-h2 toc-link" data-title="FloodSensor">FloodSensor</a>
                  </li>
                  <li>
                    <a href="#notifier" class="toc-h2 toc-link" data-title="Notifier">Notifier</a>
                  </li>
                  <li>
                    <a href="#mediaobject" class="toc-h2 toc-link" data-title="MediaObject">MediaObject</a>
                  </li>
                  <li>
                    <a href="#startstop" class="toc-h2 toc-link" data-title="StartStop">StartStop</a>
                  </li>
                  <li>
                    <a href="#dock" class="toc-h2 toc-link" data-title="Dock">Dock</a>
                  </li>
                  <li>
                    <a href="#program" class="toc-h2 toc-link" data-title="Program">Program</a>
                  </li>
                  <li>
                    <a href="#temperaturesetting" class="toc-h2 toc-link" data-title="TemperatureSetting">TemperatureSetting</a>
                  </li>
                  <li>
                    <a href="#thermostatmode" class="toc-h2 toc-link" data-title="ThermostatMode">ThermostatMode</a>
                  </li>
                  <li>
                    <a href="#lock" class="toc-h2 toc-link" data-title="Lock">Lock</a>
                  </li>
                  <li>
                    <a href="#passwordcontrol" class="toc-h2 toc-link" data-title="PasswordControl">PasswordControl</a>
                  </li>
                  <li>
                    <a href="#camerastream" class="toc-h2 toc-link" data-title="CameraStream">CameraStream</a>
                  </li>
                  <li>
                    <a href="#thermometer" class="toc-h2 toc-link" data-title="Thermometer">Thermometer</a>
                  </li>
                  <li>
                    <a href="#temperatureunit" class="toc-h2 toc-link" data-title="TemperatureUnit">TemperatureUnit</a>
                  </li>
                  <li>
                    <a href="#humiditysensor" class="toc-h2 toc-link" data-title="HumiditySensor">HumiditySensor</a>
                  </li>
                  <li>
                    <a href="#ultravioletsensor" class="toc-h2 toc-link" data-title="UltravioletSensor">UltravioletSensor</a>
                  </li>
                  <li>
                    <a href="#luminancesensor" class="toc-h2 toc-link" data-title="LuminanceSensor">LuminanceSensor</a>
                  </li>
                  <li>
                    <a href="#scene" class="toc-h2 toc-link" data-title="Scene">Scene</a>
                  </li>
                  <li>
                    <a href="#entry" class="toc-h2 toc-link" data-title="Entry">Entry</a>
                  </li>
                  <li>
                    <a href="#alarm" class="toc-h2 toc-link" data-title="Alarm">Alarm</a>
                  </li>
                  <li>
                    <a href="#clocktype" class="toc-h2 toc-link" data-title="ClockType">ClockType</a>
                  </li>
                  <li>
                    <a href="#battery" class="toc-h2 toc-link" data-title="Battery">Battery</a>
                  </li>
                  <li>
                    <a href="#refresh" class="toc-h2 toc-link" data-title="Refresh">Refresh</a>
                  </li>
                  <li>
                    <a href="#mediaplayer" class="toc-h2 toc-link" data-title="MediaPlayer">MediaPlayer</a>
                  </li>
                  <li>
                    <a href="#mediaplayeroptions" class="toc-h2 toc-link" data-title="MediaPlayerOptions">MediaPlayerOptions</a>
                  </li>
                  <li>
                    <a href="#facedetector" class="toc-h2 toc-link" data-title="FaceDetector">FaceDetector</a>
                  </li>
                  <li>
                    <a href="#online" class="toc-h2 toc-link" data-title="Online">Online</a>
                  </li>
                  <li>
                    <a href="#eventlistener" class="toc-h2 toc-link" data-title="EventListener">EventListener</a>
                  </li>
                  <li>
                    <a href="#eventlistenerregister" class="toc-h2 toc-link" data-title="EventListenerRegister">EventListenerRegister</a>
                  </li>
                  <li>
                    <a href="#logger" class="toc-h2 toc-link" data-title="Logger">Logger</a>
                  </li>
                  <li>
                    <a href="#mediasource" class="toc-h2 toc-link" data-title="MediaSource">MediaSource</a>
                  </li>
                  <li>
                    <a href="#messagingendpoint" class="toc-h2 toc-link" data-title="MessagingEndpoint">MessagingEndpoint</a>
                  </li>
                  <li>
                    <a href="#settings" class="toc-h2 toc-link" data-title="Settings">Settings</a>
                  </li>
                  <li>
                    <a href="#oauthclient" class="toc-h2 toc-link" data-title="OauthClient">OauthClient</a>
                  </li>
                  <li>
                    <a href="#devicemanager" class="toc-h2 toc-link" data-title="DeviceManager">DeviceManager</a>
                  </li>
                  <li>
                    <a href="#device" class="toc-h2 toc-link" data-title="Device">Device</a>
                  </li>
                  <li>
                    <a href="#scryptedthingtype" class="toc-h2 toc-link" data-title="ScryptedThingType">ScryptedThingType</a>
                  </li>
                  <li>
                    <a href="#devicemanifest" class="toc-h2 toc-link" data-title="DeviceManifest">DeviceManifest</a>
                  </li>
                  <li>
                    <a href="#deviceprovider" class="toc-h2 toc-link" data-title="DeviceProvider">DeviceProvider</a>
                  </li>
                  <li>
                    <a href="#httprequesthandler" class="toc-h2 toc-link" data-title="HttpRequestHandler">HttpRequestHandler</a>
                  </li>
                  <li>
                    <a href="#httprequest" class="toc-h2 toc-link" data-title="HttpRequest">HttpRequest</a>
                  </li>
                  <li>
                    <a href="#httpresponse" class="toc-h2 toc-link" data-title="HttpResponse">HttpResponse</a>
                  </li>
                  <li>
                    <a href="#httpresponseoptions" class="toc-h2 toc-link" data-title="HttpResponseOptions">HttpResponseOptions</a>
                  </li>
                  <li>
                    <a href="#eventemitter" class="toc-h2 toc-link" data-title="EventEmitter">EventEmitter</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='getting-started'>Getting Started <br/></h1><h2 id='controlling-a-device'>Controlling a Device</h2>
<aside class="warning">You must have Visual Studio Code and the <a href='https://marketplace.visualstudio.com/items?itemName=koush.duk-debug'>Duktape Debugger Plugin</a> installed.</aside>

<ol>
<li>Create a new Script under Plugins.</li>
<li>Set the type to Library.</li>
<li>Assign an device that supports OnOff to a variable &quot;switch&quot;.</li>
<li>Run the example code using the &quot;Test&quot; button.</li>
</ol>
<pre class="highlight javascript tab-javascript"><code><span class="k">if</span> <span class="p">(</span><span class="k">switch</span><span class="p">.</span><span class="nx">isOn</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">.</span><span class="nx">turnOff</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">.</span><span class="nx">turnOn</span><span class="p">();</span>
<span class="p">}</span>
</code></pre><h2 id='creating-a-device'>Creating a Device</h2><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span>

<span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'Hello World. This will create a virtual OnOff device.'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">Device</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_isOn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">Device</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isOn</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'isOn was called!'</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isOn</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Device</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">turnOff</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// set a breakpoint here.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_isOn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'turnOff was called!'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">Device</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">turnOn</span> <span class="o">=</span> <span class="nx">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// set a breakpoint here.</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'turnOn was called!'</span><span class="p">);</span>

    <span class="c1">// turnOn must return immediately, but it can trigger other things... </span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'XMLHttpRequest is polyfilled by the Android host.'</span><span class="p">);</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'This allows the popular http library axios to work.'</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">ip</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'http://jsonip.com'</span><span class="p">);</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s2">`my ip: </span><span class="p">${</span><span class="nx">ip</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">ip</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_isOn</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Device</span><span class="p">();</span>
</code></pre>
<p>This sample creates a simple OnOff device that retrieves your IP when the On button is clicked. This virtual device will
be synced to upstream integration providers, such as Google Home or Apple Homekit.</p>

<ol>
<li>Create a new Script under Plugins.</li>
<li>Set the type to Device.</li>
<li>Select/check the OnOff interface.</li>
<li>Save.</li>
<li>Click the Debug button.</li>
<li>Edit .vcode/settings.json and set the value of &quot;scrypted.debugHost&quot;: &quot;THIS.IS.MY.IP&quot;</li>
<li>Launch Scrypted Debugger in VS Code.</li>
</ol>
<h1 id='reference'>Reference</h1><h2 id='onoff'>OnOff</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Toggle an OnOff device</span>
<span class="k">if</span> <span class="p">(</span><span class="k">switch</span><span class="p">.</span><span class="nx">isOn</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">.</span><span class="nx">turnOff</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">.</span><span class="nx">turnOn</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<aside class="notice">
OnOff is a basic binary switch.
</aside>
<h3 id='ison'>isOn</h3>
<p>boolean isOn()</p>
<h3 id='turnoff'>turnOff</h3>
<p>void turnOff()</p>
<h3 id='turnon'>turnOn</h3>
<p>void turnOn()</p>
<h2 id='brightness'>Brightness</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Set a Brightness device to 50%</span>
<span class="nx">dimmer</span><span class="p">.</span><span class="nx">setLevel</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</code></pre>

<aside class="notice">
Brightness is a lighting device that can be dimmed/lit between 0 to 100.
</aside>
<h3 id='getlevel'>getLevel</h3>
<p>number getLevel()</p>
<h3 id='setlevel'>setLevel</h3>
<p>void setLevel(brightness: number)</p>
<h2 id='colorsettingtemperature'>ColorSettingTemperature</h2>
<aside class="notice">
ColorSettingTemperature sets the color temperature of a light in Kelvin.
</aside>
<h3 id='gettemperature'>getTemperature</h3>
<p>number getTemperature()</p>
<h3 id='gettemperaturemaxk'>getTemperatureMaxK</h3>
<p>number getTemperatureMaxK()</p>
<h3 id='gettemperaturemink'>getTemperatureMinK</h3>
<p>number getTemperatureMinK()</p>
<h3 id='settemperature'>setTemperature</h3>
<p>void setTemperature(kelvin: number)</p>
<h2 id='colorsettingrgb'>ColorSettingRgb</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// set the color to red on a ColorSettingRgb device</span>
<span class="nx">colorBulb</span><span class="p">.</span><span class="nx">setRgb</span><span class="p">({</span>
    <span class="na">r</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
    <span class="na">g</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">b</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">})</span>
</code></pre>

<aside class="notice">
ColorSettingRgb sets the color of a colored light using the RGB representation.
</aside>
<h3 id='getrgb'>getRgb</h3>
<p><a href='#colorrgb'>ColorRgb</a> getRgb()</p>
<h3 id='setrgb'>setRgb</h3>
<p>void setRgb(r: number, g: number, b: number)</p>
<h2 id='colorrgb'>ColorRgb</h2>
<aside class="notice">
Represents an RGB color value component values between 0 and 255.
</aside>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>b</td>
<td>number</td>
</tr>
<tr>
<td>g</td>
<td>number</td>
</tr>
<tr>
<td>r</td>
<td>number</td>
</tr>
</tbody></table>
<h2 id='colorsettinghsv'>ColorSettingHsv</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// set the color to red on a ColorSettingHsv device</span>
<span class="nx">colorBulb</span><span class="p">.</span><span class="nx">setHsv</span><span class="p">({</span>
    <span class="na">h</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">s</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">v</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">})</span>
</code></pre>

<aside class="notice">
ColorSettingHsv sets the color of a colored light using the HSV representation.
</aside>
<h3 id='gethsv'>getHsv</h3>
<p><a href='#colorhsv'>ColorHsv</a> getHsv()</p>
<h3 id='sethsv'>setHsv</h3>
<p>void setHsv(hue: double, saturation: double, value: double)</p>
<h2 id='colorhsv'>ColorHsv</h2>
<aside class="notice">
Represents an HSV color value component values between 0 and 1.
</aside>
<h3 id='properties-2'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>h</td>
<td>double</td>
</tr>
<tr>
<td>s</td>
<td>double</td>
</tr>
<tr>
<td>v</td>
<td>double</td>
</tr>
</tbody></table>
<h2 id='binarysensor'>BinarySensor</h2><h3 id='getbinarystate'>getBinaryState</h3>
<p>boolean getBinaryState()</p>
<h2 id='entrysensor'>EntrySensor</h2><h3 id='isentryopen'>isEntryOpen</h3>
<p>boolean isEntryOpen()</p>
<h2 id='entryhandlesensor'>EntryHandleSensor</h2><h3 id='isdooropen'>isDoorOpen</h3>
<p>boolean isDoorOpen()</p>
<h2 id='intrusionsensor'>IntrusionSensor</h2><h3 id='isintrusiondetected'>isIntrusionDetected</h3>
<p>boolean isIntrusionDetected()</p>
<h2 id='floodsensor'>FloodSensor</h2><h3 id='isflooded'>isFlooded</h3>
<p>boolean isFlooded()</p>
<h2 id='notifier'>Notifier</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// SMS with only text</span>
<span class="nx">twilioNumber</span><span class="p">.</span><span class="nx">sendNotification</span><span class="p">(</span><span class="s1">'Alert!'</span><span class="p">,</span> <span class="s1">'Something Happened!'</span><span class="p">);</span>

<span class="c1">// MMS with image</span>
<span class="nx">twilioNumber</span><span class="p">.</span><span class="nx">sendNotification</span><span class="p">(</span><span class="s1">'Alert!'</span><span class="p">,</span> <span class="s1">'Something Happened!'</span><span class="p">,</span> <span class="s1">'http://example.org/image.png'</span><span class="p">,</span> <span class="s1">'image/png'</span><span class="p">);</span>

<span class="c1">// text to speech on speakers</span>
<span class="nx">googleHomeSpeaker</span><span class="p">.</span><span class="nx">sendNotification</span><span class="p">(</span><span class="s1">'Title is not not transcribed'</span><span class="p">,</span> <span class="s1">'Something Happened!'</span><span class="p">);</span>

<span class="c1">// cast to chromecast</span>
<span class="nx">twilioNumber</span><span class="p">.</span><span class="nx">sendNotification</span><span class="p">(</span><span class="s1">'Alert!'</span><span class="p">,</span> <span class="s1">'Something Happened!'</span><span class="p">,</span> <span class="s1">'http://example.org/video.mp4'</span><span class="p">,</span> <span class="s1">'video'</span><span class="p">);</span>
</code></pre>

<aside class="notice">
Notifier can be any endpoint that can receive messages, such as speakers, phone numbers, messaging clients, etc. The messages may optionally contain media.
</aside>
<h3 id='sendnotification'>sendNotification</h3>
<p>void sendNotification(title: string, body: string)</p>
<h3 id='sendnotification-2'>sendNotification</h3>
<p>void sendNotification(title: string, body: string, media: <a href='#mediaobject'>MediaObject</a>, mimeType: string)</p>

<p>If a the media parameter is supplied, the mime type denotes how to send the media within notification. For example, specify &#39;image/*&#39; to send a video MediaObject as an image.
Passing null uses the native type of the MediaObject. If that is not supported by the notifier, the media will be converted to a compatible type.</p>
<h2 id='mediaobject'>MediaObject</h2>
<aside class="notice">
MediaObject is an intermediate object within Scrypted to represent all media objects. Plugins should use the MediaConverter to convert the Scrypted MediaObject into a desired type, whether it is a externally accessible URL, a Buffer, etc.
</aside>
<h2 id='startstop'>StartStop</h2>
<aside class="notice">
StartStop represents a device that can be started, stopped, and possibly paused and resumed. Typically vacuum cleaners or washers.
</aside>
<h3 id='ispausable'>isPausable</h3>
<p>boolean isPausable()</p>
<h3 id='ispaused'>isPaused</h3>
<p>boolean isPaused()</p>
<h3 id='isrunning'>isRunning</h3>
<p>boolean isRunning()</p>
<h3 id='pause'>pause</h3>
<p>void pause()</p>
<h3 id='resume'>resume</h3>
<p>void resume()</p>
<h3 id='start'>start</h3>
<p>void start()</p>
<h3 id='stop'>stop</h3>
<p>void stop()</p>
<h2 id='dock'>Dock</h2>
<aside class="notice">
Dock instructs devices that have a base station or charger, to return to their home.
</aside>
<h3 id='dock-2'>dock</h3>
<p>void dock()</p>
<h3 id='isdocked'>isDocked</h3>
<p>boolean isDocked()</p>
<h2 id='program'>Program</h2><h3 id='run'>run</h3>
<p>object run(args: object[])</p>

<p>Synchronously run a script given the provided arguments.</p>
<h3 id='runasync'>runAsync</h3>
<p>object runAsync(args: object[])</p>

<p>Asynchronously run a script given the provided arguments.</p>
<h2 id='temperaturesetting'>TemperatureSetting</h2>
<aside class="notice">
TemperatureSetting represents a thermostat device.
</aside>
<h3 id='getavailablethermostatmodes'>getAvailableThermostatModes</h3>
<p><a href='#thermostatmode'>ThermostatMode</a>[] getAvailableThermostatModes()</p>
<h3 id='gettemperaturesetpoint'>getTemperatureSetpoint</h3>
<p>double getTemperatureSetpoint()</p>
<h3 id='gettemperaturesetpointhigh'>getTemperatureSetpointHigh</h3>
<p>double getTemperatureSetpointHigh()</p>
<h3 id='gettemperaturesetpointlow'>getTemperatureSetpointLow</h3>
<p>double getTemperatureSetpointLow()</p>
<h3 id='getthermostatmode'>getThermostatMode</h3>
<p><a href='#thermostatmode'>ThermostatMode</a> getThermostatMode()</p>
<h3 id='settemperaturesetrange'>setTemperatureSetRange</h3>
<p>void setTemperatureSetRange(low: double, high: double)</p>
<h3 id='settemperaturesetpoint'>setTemperatureSetpoint</h3>
<p>void setTemperatureSetpoint(degrees: double)</p>
<h3 id='setthermostatmode'>setThermostatMode</h3>
<p>void setThermostatMode(mode: <a href='#thermostatmode'>ThermostatMode</a>)</p>
<h2 id='thermostatmode'>ThermostatMode</h2>
<table><thead>
<tr>
<th>Enum</th>
</tr>
</thead><tbody>
<tr>
<td>&quot;Off&quot;</td>
</tr>
<tr>
<td>&quot;Cool&quot;</td>
</tr>
<tr>
<td>&quot;Heat&quot;</td>
</tr>
<tr>
<td>&quot;HeatCool&quot;</td>
</tr>
<tr>
<td>&quot;Auto&quot;</td>
</tr>
<tr>
<td>&quot;FanOnly&quot;</td>
</tr>
<tr>
<td>&quot;Purifier&quot;</td>
</tr>
<tr>
<td>&quot;Eco&quot;</td>
</tr>
<tr>
<td>&quot;Dry&quot;</td>
</tr>
<tr>
<td>&quot;On&quot;</td>
</tr>
</tbody></table>
<h2 id='lock'>Lock</h2>
<aside class="notice">
Lock controls devices that can lock or unlock entries. Often works in tandem with PasswordControl.
</aside>
<h3 id='islocked'>isLocked</h3>
<p>boolean isLocked()</p>
<h3 id='lock-2'>lock</h3>
<p>void lock()</p>
<h3 id='unlock'>unlock</h3>
<p>void unlock()</p>
<h2 id='passwordcontrol'>PasswordControl</h2>
<aside class="notice">
PasswordControl represents devices that authorize users via a passcode or pin code.
</aside>
<h3 id='addpassword'>addPassword</h3>
<p>void addPassword(password: string)</p>
<h3 id='getpasswords'>getPasswords</h3>
<p>Set getPasswords()</p>
<h3 id='removepassword'>removePassword</h3>
<p>void removePassword(password: string)</p>
<h2 id='camerastream'>CameraStream</h2><h3 id='createvideocapturer'>createVideoCapturer</h3>
<p>Future createVideoCapturer()</p>
<h2 id='thermometer'>Thermometer</h2><h3 id='gettemperatureambient'>getTemperatureAmbient</h3>
<p>double getTemperatureAmbient()</p>

<p>Get the ambient temperature in Celsius.</p>
<h3 id='gettemperatureunit'>getTemperatureUnit</h3>
<p><a href='#temperatureunit'>TemperatureUnit</a> getTemperatureUnit()</p>

<p>Get the user facing unit of measurement for this thermometer. This may be Fahrenheit, but getTemperatureAmbient will return results in Celsius.</p>
<h2 id='temperatureunit'>TemperatureUnit</h2>
<table><thead>
<tr>
<th>Enum</th>
</tr>
</thead><tbody>
<tr>
<td>&quot;C&quot;</td>
</tr>
<tr>
<td>&quot;F&quot;</td>
</tr>
</tbody></table>
<h2 id='humiditysensor'>HumiditySensor</h2><h3 id='gethumidityambient'>getHumidityAmbient</h3>
<p>double getHumidityAmbient()</p>
<h2 id='ultravioletsensor'>UltravioletSensor</h2><h3 id='getultraviolet'>getUltraviolet</h3>
<p>double getUltraviolet()</p>
<h2 id='luminancesensor'>LuminanceSensor</h2><h3 id='getluminance'>getLuminance</h3>
<p>double getLuminance()</p>
<h2 id='scene'>Scene</h2>
<aside class="notice">
Scenes control multiple different devices into a given state.
</aside>
<h3 id='activate'>activate</h3>
<p>void activate()</p>
<h3 id='deactivate'>deactivate</h3>
<p>void deactivate()</p>
<h3 id='isreversible'>isReversible</h3>
<p>boolean isReversible()</p>

<p>If a scene can be reversed, isReversible should return true. Otherwise deactivate will not be called.</p>
<h2 id='entry'>Entry</h2>
<aside class="notice">
Entry represents devices that can open and close barriers, such as garage doors.
</aside>
<h3 id='closeentry'>closeEntry</h3>
<p>void closeEntry()</p>
<h3 id='isentryopen-2'>isEntryOpen</h3>
<p>boolean isEntryOpen()</p>
<h3 id='openentry'>openEntry</h3>
<p>void openEntry()</p>
<h2 id='alarm'>Alarm</h2>
<aside class="notice">
Event data from the Scheduler component.
</aside>
<h3 id='getclocktype'>getClockType</h3>
<p><a href='#clocktype'>ClockType</a> getClockType()</p>
<h3 id='gethour'>getHour</h3>
<p>number getHour()</p>
<h3 id='getminute'>getMinute</h3>
<p>number getMinute()</p>
<h3 id='isenabled'>isEnabled</h3>
<p>boolean isEnabled(day: number)</p>
<h2 id='clocktype'>ClockType</h2>
<table><thead>
<tr>
<th>Enum</th>
</tr>
</thead><tbody>
<tr>
<td>&quot;_AM&quot;</td>
</tr>
<tr>
<td>&quot;_PM&quot;</td>
</tr>
<tr>
<td>&quot;_24HourClock&quot;</td>
</tr>
<tr>
<td>&quot;_BeforeSunrise&quot;</td>
</tr>
<tr>
<td>&quot;_AfterSunrise&quot;</td>
</tr>
<tr>
<td>&quot;_BeforeSunset&quot;</td>
</tr>
<tr>
<td>&quot;_AfterSunset&quot;</td>
</tr>
</tbody></table>
<h2 id='battery'>Battery</h2>
<aside class="notice">
Battery retrieves the battery level of battery powered devices.
</aside>
<h3 id='getbatterylevel'>getBatteryLevel</h3>
<p>number getBatteryLevel()</p>
<h2 id='refresh'>Refresh</h2>
<aside class="notice">
Refresh indicates that this device has properties that are not automatically updated, and must be periodically refreshed.
</aside>
<h3 id='getrefreshfrequency'>getRefreshFrequency</h3>
<p>number getRefreshFrequency()</p>

<p>Get the recommended refresh/poll frequency in seconds for this device.</p>
<h3 id='refresh-2'>refresh</h3>
<p>void refresh(refreshInterface: Class, userInitiated: boolean)</p>

<p>This method is called by Scrypted when the properties of the device need to be refreshed. When the device has completed the refresh, the appropriate events should be emitted. The parameters provide the specific interface that needs to be refreshed and whether it was user initiated (via UI or voice).</p>
<h2 id='mediaplayer'>MediaPlayer</h2>
<aside class="notice">
MediaPlayer allows media playback on screen or speaker devices, such as Chromecasts or TVs.
</aside>
<h3 id='load'>load</h3>
<p>void load(media: <a href='#mediaobject'>MediaObject</a>, options: <a href='#mediaplayeroptions'>MediaPlayerOptions</a>)</p>
<h3 id='load-2'>load</h3>
<p>void load(mediaUrl: string, options: <a href='#mediaplayeroptions'>MediaPlayerOptions</a>)</p>
<h3 id='pause-2'>pause</h3>
<p>void pause()</p>
<h3 id='play'>play</h3>
<p>void play()</p>
<h3 id='stop-2'>stop</h3>
<p>void stop()</p>
<h2 id='mediaplayeroptions'>MediaPlayerOptions</h2><h3 id='properties-3'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>autoplay</td>
<td>boolean</td>
</tr>
<tr>
<td>mimeType</td>
<td>string</td>
</tr>
</tbody></table>
<h2 id='facedetector'>FaceDetector</h2><h2 id='online'>Online</h2>
<aside class="notice">
Online denotes whether the device is online or unresponsive. It may be unresponsive due to being unplugged, network error, etc.
</aside>
<h3 id='isonline'>isOnline</h3>
<p>boolean isOnline()</p>
<h2 id='eventlistener'>EventListener</h2><h3 id='onevent'>onEvent</h3>
<p>void onEvent(eventSource: ScryptedInterface, eventInterface: Class, eventData: object)</p>

<p>This device type can be hooked by Automation actions to handle events. The event source, event type (interface), and event data are all passed to the listener as arguments.</p>
<h2 id='eventlistenerregister'>EventListenerRegister</h2>
<aside class="notice">
Returned when an event listener is attached to an EventEmitter. Call removeListener to unregister from events.
</aside>
<h2 id='logger'>Logger</h2>
<aside class="notice">
Logger is exposed via log.* to allow writing to the Scrypted log.
</aside>
<h3 id='a'>a</h3>
<p>void a(msg: string)</p>

<p>Alert. Alert level logs will be displayed as a notification in the management console.</p>
<h3 id='clear'>clear</h3>
<p>void clear()</p>

<p>Clear the log</p>
<h3 id='clearalert'>clearAlert</h3>
<p>void clearAlert(msg: string)</p>

<p>Clear a specific alert</p>
<h3 id='clearalerts'>clearAlerts</h3>
<p>void clearAlerts()</p>

<p>Clear all alerts</p>
<h3 id='d'>d</h3>
<p>void d(msg: string)</p>

<p>Debug</p>
<h3 id='e'>e</h3>
<p>void e(msg: string)</p>

<p>Error</p>
<h3 id='i'>i</h3>
<p>void i(msg: string)</p>

<p>Info</p>
<h3 id='v'>v</h3>
<p>void v(msg: string)</p>

<p>Verbose</p>
<h3 id='w'>w</h3>
<p>void w(msg: string)</p>

<p>Warn</p>
<h2 id='mediasource'>MediaSource</h2><h3 id='getmedia'>getMedia</h3>
<p><a href='#mediaobject'>MediaObject</a> getMedia()</p>

<p>Get a MediaObject that will be automatically converted for playback on other devices.</p>
<h2 id='messagingendpoint'>MessagingEndpoint</h2><h2 id='settings'>Settings</h2>
<aside class="notice">
Settings viewing and editing of device configurations that describe or modify behavior.
</aside>
<h3 id='getboolean'>getBoolean</h3>
<p>boolean getBoolean(key: string)</p>
<h3 id='getboolean-2'>getBoolean</h3>
<p>boolean getBoolean(key: string, defaultValue: boolean)</p>
<h3 id='getconfigurationvaluelist'>getConfigurationValueList</h3>
<p>List getConfigurationValueList(key: string)</p>
<h3 id='getdouble'>getDouble</h3>
<p>Double getDouble(key: string)</p>
<h3 id='getfloat'>getFloat</h3>
<p>Float getFloat(key: string)</p>
<h3 id='getint'>getInt</h3>
<p>Integer getInt(key: string)</p>
<h3 id='getkeydescription'>getKeyDescription</h3>
<p>string getKeyDescription(key: string)</p>
<h3 id='getkeys'>getKeys</h3>
<p>List getKeys()</p>
<h3 id='getstring'>getString</h3>
<p>string getString(key: string)</p>
<h3 id='putboolean'>putBoolean</h3>
<p>void putBoolean(key: string, value: boolean)</p>
<h3 id='putdouble'>putDouble</h3>
<p>void putDouble(key: string, value: double)</p>
<h3 id='putfloat'>putFloat</h3>
<p>void putFloat(key: string, value: float)</p>
<h3 id='putint'>putInt</h3>
<p>void putInt(key: string, value: number)</p>
<h3 id='putstring'>putString</h3>
<p>void putString(key: string, value: string)</p>
<h2 id='oauthclient'>OauthClient</h2>
<aside class="notice">
The OauthClient can be implemented to perform the browser based Oauth process from within a plugin.
</aside>
<h3 id='getoauthurl'>getOauthUrl</h3>
<p>string getOauthUrl()</p>

<p>Get the Oauth URL to navigate to in the browser. The redirect_uri parameter is not needed and will be automatically set by Scrypted.</p>
<h3 id='onoauthcallback'>onOauthCallback</h3>
<p>void onOauthCallback(callbackUrl: string)</p>

<p>When an oauth request by a plugin completes, the callback url, with the code/token, will be passed to this method.</p>
<h2 id='devicemanager'>DeviceManager</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// in a plugin that implements DeviceProvider</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">DeviceManager</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'@scrypted/sdk'</span><span class="p">);</span>

<span class="c1">// Sync the following two lights with Scrypted. New devices unknown to Scrypted will be added</span>
<span class="c1">// while devices that were previously reported, and no longer exist, will be removed.</span>
<span class="c1">// onDevicesChanged should be called with the full sync list of devices.</span>
<span class="nx">DeviceManager</span><span class="p">.</span><span class="nx">onDevicesChanged</span><span class="p">({</span>
    <span class="na">devices</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="s1">'1'</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Light 1'</span><span class="p">,</span>
            <span class="na">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
            <span class="na">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
            <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="s1">'2'</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Light 2'</span><span class="p">,</span>
            <span class="na">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
            <span class="na">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
            <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">});</span>
</code></pre>

<aside class="notice">
DeviceManager is the interface which plugins use to report devices and device events to Scrypted. It is also used to query Scrypted for other devices.
</aside>
<h3 id='getdevicebyid'>getDeviceById</h3>
<p>ScryptedInterface getDeviceById(id: number)</p>

<p>Find a Scrypted device by id.</p>
<h3 id='getdevicebyname'>getDeviceByName</h3>
<p>ScryptedInterface getDeviceByName(name: string)</p>

<p>Find a Scrypted device by name.</p>
<h3 id='ondevicediscovered'>onDeviceDiscovered</h3>
<p>void onDeviceDiscovered(device: <a href='#device'>Device</a>)</p>

<p>onDeviceDiscovered is used to report new devices that are trickle discovered, one by one, such as via a network broadcast.</p>
<h3 id='ondeviceevent'>onDeviceEvent</h3>
<p>void onDeviceEvent(eventInterface: Class, eventData: object)</p>

<p>Fire an event for this plugin&#39;s device.</p>
<h3 id='ondeviceevent-2'>onDeviceEvent</h3>
<p>void onDeviceEvent(id: string, eventInterface: Class, eventData: object)</p>

<p>Fire an event for a device provided by this plugin.</p>
<h3 id='ondeviceschanged'>onDevicesChanged</h3>
<p>void onDevicesChanged(devices: <a href='#devicemanifest'>DeviceManifest</a>)</p>

<p>onDevicesChanged is used to sync Scrypted with devices that are attached to a hub, such as Hue or SmartThings. All the devices should be reported at once.</p>
<h2 id='device'>Device</h2>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="nl">id</span><span class="p">:</span> <span class="s1">'2'</span><span class="p">,</span>
    <span class="nx">name</span><span class="p">:</span> <span class="s1">'Light 2'</span><span class="p">,</span>
    <span class="nx">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
    <span class="nx">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
    <span class="nx">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<aside class="notice">
Device objects are created by DeviceProviders when new devices are discover and synced to Scrypted via the DeviceManager.
</aside>
<h3 id='properties-4'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>events</td>
<td>string[]</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
</tr>
<tr>
<td>interfaces</td>
<td>string[]</td>
</tr>
<tr>
<td>model</td>
<td>string</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
</tr>
<tr>
<td>room</td>
<td>string</td>
</tr>
<tr>
<td>type</td>
<td><a href='#scryptedthingtype'>ScryptedThingType</a></td>
</tr>
</tbody></table>
<h2 id='scryptedthingtype'>ScryptedThingType</h2>
<table><thead>
<tr>
<th>Enum</th>
</tr>
</thead><tbody>
<tr>
<td>&quot;Camera&quot;</td>
</tr>
<tr>
<td>&quot;Fan&quot;</td>
</tr>
<tr>
<td>&quot;Light&quot;</td>
</tr>
<tr>
<td>&quot;Switch&quot;</td>
</tr>
<tr>
<td>&quot;Outlet&quot;</td>
</tr>
<tr>
<td>&quot;Sensor&quot;</td>
</tr>
<tr>
<td>&quot;Scene&quot;</td>
</tr>
<tr>
<td>&quot;Program&quot;</td>
</tr>
<tr>
<td>&quot;Automation&quot;</td>
</tr>
<tr>
<td>&quot;Vacuum&quot;</td>
</tr>
<tr>
<td>&quot;Notifier&quot;</td>
</tr>
<tr>
<td>&quot;Thermostat&quot;</td>
</tr>
<tr>
<td>&quot;Lock&quot;</td>
</tr>
<tr>
<td>&quot;PasswordControl&quot;</td>
</tr>
<tr>
<td>&quot;Display&quot;</td>
</tr>
<tr>
<td>&quot;Speaker&quot;</td>
</tr>
<tr>
<td>&quot;Event&quot;</td>
</tr>
<tr>
<td>&quot;Entry&quot;</td>
</tr>
<tr>
<td>&quot;DeviceProvider&quot;</td>
</tr>
<tr>
<td>&quot;Unknown&quot;</td>
</tr>
</tbody></table>
<h2 id='devicemanifest'>DeviceManifest</h2>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="nl">devices</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="s1">'1'</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Light 1'</span><span class="p">,</span>
            <span class="na">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
            <span class="na">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
            <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="s1">'2'</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="s1">'Light 2'</span><span class="p">,</span>
            <span class="na">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
            <span class="na">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
            <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre>

<aside class="notice">
DeviceManifest is passed to DeviceManager.onDevicesChanged to sync a full list of devices from the controller/hub (Hue, SmartThings, etc)
</aside>
<h3 id='properties-5'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>devices</td>
<td><a href='#device'>Device</a>[]</td>
</tr>
</tbody></table>
<h2 id='deviceprovider'>DeviceProvider</h2>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span><span class="nx">DeviceManager</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'@scrypted/sdk'</span><span class="p">);</span>

<span class="c1">// Devices returned by the DeviceProvider</span>
<span class="kd">function</span> <span class="nx">Device</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">Device</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isOn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Device</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">turnOff</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'turnOff was called!'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">Device</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">turnOn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s1">'turnOn was called!'</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// DeviceProvider handles discovery and device requests</span>
<span class="kd">function</span> <span class="nx">DeviceProvider</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// it is recommended to automatically perform discovery on startup</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">discoverDevices</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">DeviceProvider</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">discoverDevices</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Sync the following two lights with Scrypted. New devices unknown to Scrypted will be added</span>
    <span class="c1">// while devices that were previously reported, and no longer exist, will be removed.</span>
    <span class="c1">// onDevicesChanged should be called with the full sync list of devices.</span>
    <span class="nx">DeviceManager</span><span class="p">.</span><span class="nx">onDevicesChanged</span><span class="p">({</span>
        <span class="na">devices</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="na">id</span><span class="p">:</span> <span class="s1">'1'</span><span class="p">,</span>
                <span class="na">name</span><span class="p">:</span> <span class="s1">'Light 1'</span><span class="p">,</span>
                <span class="na">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
                <span class="na">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
                <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="na">id</span><span class="p">:</span> <span class="s1">'2'</span><span class="p">,</span>
                <span class="na">name</span><span class="p">:</span> <span class="s1">'Light 2'</span><span class="p">,</span>
                <span class="na">type</span><span class="p">:</span> <span class="s1">'Light'</span><span class="p">,</span>
                <span class="na">interfaces</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">],</span>
                <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="s1">'Brightness'</span><span class="p">,</span> <span class="s1">'ColorSettingHsv'</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">DeviceProvider</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDevice</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Device</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="p">};</span>



<span class="kr">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">Device</span><span class="p">();</span>
</code></pre>

<aside class="notice">
DeviceProvider acts as a controller/hub and exposes multiple devices to Scrypted Device Manager.
</aside>
<h3 id='discoverdevices'>discoverDevices</h3>
<p>void discoverDevices(duration: number)</p>

<p>Initiate device discovery for the specified duration.</p>
<h3 id='getdevice'>getDevice</h3>
<p>object getDevice(id: string)</p>

<p>Get an instance of a previously discovered device that was reported to the device manager.</p>
<h2 id='httprequesthandler'>HttpRequestHandler</h2>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">HttpHandler</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>

<span class="c1">// See documentation! </span>
<span class="c1">// Will handle requests at https://&lt;local-ip&gt;:9443/endpoint/test/ (or /endpoint/@koush/test)</span>
<span class="nx">HttpHandler</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getEndpoint</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'test'</span><span class="p">;</span>
    <span class="c1">// or, an npm user/org namespace works as well:</span>
    <span class="c1">// return '@koush/test';</span>
<span class="p">};</span>

<span class="nx">HttpHandler</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">onRequest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hello world!!'</span><span class="p">)</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HttpHandler</span><span class="p">();</span>
</code></pre>

<aside class="notice">
The HttpRequestHandler allows handling of web requests under the endpoint path: /endpoint/<endpoint>/*.
</aside>
<h3 id='getendpoint'>getEndpoint</h3>
<p>string getEndpoint()</p>

<p>Get the preferred endpoint of this HttpRequestHandler. Local/development scripts can set this to any value. This is ignored if the plugin is installed via npm: the endpoint will always be the npm package name.</p>
<h3 id='onrequest'>onRequest</h3>
<p>void onRequest(request: <a href='#httprequest'>HttpRequest</a>, response: <a href='#httpresponse'>HttpResponse</a>)</p>

<p>Callback to handle an incoming request.</p>
<h2 id='httprequest'>HttpRequest</h2><h3 id='properties-6'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>string</td>
</tr>
<tr>
<td>headers</td>
<td>object</td>
</tr>
<tr>
<td>method</td>
<td>string</td>
</tr>
<tr>
<td>rootPath</td>
<td>string</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
</tr>
</tbody></table>
<h2 id='httpresponse'>HttpResponse</h2>
<aside class="notice">
Response object provided by the HttpRequestHandler.
</aside>
<h3 id='send'>send</h3>
<p>void send(options: <a href='#httpresponseoptions'>HttpResponseOptions</a>, body: string)</p>
<h3 id='send-2'>send</h3>
<p>void send(options: <a href='#httpresponseoptions'>HttpResponseOptions</a>, body: Buffer)</p>
<h3 id='send-3'>send</h3>
<p>void send(body: string)</p>
<h3 id='send-4'>send</h3>
<p>void send(body: Buffer)</p>
<h2 id='httpresponseoptions'>HttpResponseOptions</h2><h3 id='properties-7'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>asContent</td>
<td>boolean</td>
</tr>
<tr>
<td>code</td>
<td>number</td>
</tr>
<tr>
<td>headers</td>
<td>object</td>
</tr>
</tbody></table>
<h2 id='eventemitter'>EventEmitter</h2>
<pre class="highlight javascript tab-javascript"><code><span class="nx">light</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'OnOff'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eventSource</span><span class="p">,</span> <span class="nx">eventInterface</span><span class="p">,</span> <span class="nx">eventData</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">i</span><span class="p">(</span><span class="s2">`The light state changed: </span><span class="p">${</span><span class="nx">eventData</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<aside class="notice">
EventEmitter is implemented by most devices. Add listeners to subscribe to events from that device.
</aside>
<h3 id='on'>on</h3>
<p><a href='#eventlistenerregister'>EventListenerRegister</a> on(event: string, callback: function)</p>

<p>Subscribe to events from a specific interface on a device, such as &#39;OnOff&#39; or &#39;Brightness&#39;.
The callback function has the signature function(eventSource, eventData).
The eventSource is the interface from where the event originated, and eventData will contain data specific
to that type of interface. OnOff would be boolean, while Brightness would be an integer between 0 and 100.</p>
<h3 id='watch'>watch</h3>
<p><a href='#eventlistenerregister'>EventListenerRegister</a> watch(event: string, callback: function)</p>

<p>Similar to &#39;on&#39;, but will passively watch for events, and not initiate polling.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="typescript">typescript</a>
          </div>
      </div>
    </div>
  </body>
</html>
